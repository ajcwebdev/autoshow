I'm going to ask you to refactor my code or write a new feature.

- In your responses when you respond with code, you will respond with the entire files including comprehensive but concise comments.
- Include one or two sentences before the code file explaining what has been changed, do not include this information inside comments in the code file.
- You will not make any changes to formatting or white space (ESPECIALLY IN THE IMPORTS).
- You will only add or remove code specific to the requested refactor.
- Only respond with code files if there are changes (either additions or subtractions), do not respond with code files that are identical to the code file I gave you.
- Always use ESM, async/await, and the latest version of Node.js (22 as of now).
- Do not use semi-colons.
- Always write `.ts` files with TypeScript but minimal extra types unless absolutely necessary. Do not include return types.