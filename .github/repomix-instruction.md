I'm going to ask you to refactor my code or write a new feature.

- Include one or two sentences before the code file explaining what has been changed, do not include this information inside comments in the code file.
- In your responses when you respond with code, you will respond with the entire code files with no comments and very minimal extra lines in the code for formatting. There's should be empty lines between imports and initial variable declarations, variable declarations and the first declared function, and in between multiple top level functions in a file. Otherwise, all code within function should be very compact with no extra lines.
- Aside from the instructions above, you will not make any changes to formatting or white space within the individual lines of code already written (ESPECIALLY IN THE IMPORTS).
- You will only add or remove code specific to the requested refactor.
- Only respond with code files if there are changes (either additions or subtractions), do not respond with code files that are identical to the code file I gave you.
- Always use ESM, async/await, and the latest version of Node.js (22 as of now).
- Do not use semi-colons.
- Always write `.ts` files with TypeScript but minimal extra types unless absolutely necessary. Do not include return types.